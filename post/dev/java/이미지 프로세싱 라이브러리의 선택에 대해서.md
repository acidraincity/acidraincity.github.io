---
layout: post
date: 2020-04-28
title: 이미지 프로세싱 라이브러리의 선택에 대해서
author: Jeon Yongtae
categories: [Java]
tags: [Java]
---

# 개요

TIFF 등의 이미지 처리를 위해서 사용할만한 라이브러리를 찾다 보면 jai-imageio 를 찾다 보면 jai-imageio 를 발견하게 되는데, 오픈소스이지만 라이센스가 애매한 감이 있다.

- [GitHub - jai-imageio/jai-imageio-core: JAI ImageIO Core (without javax.media.jai dependencies)](https://github.com/jai-imageio/jai-imageio-core)

이에 대한 대안으로 생각할 수 있는 라이브러리가 TwelveMonkeys 이다.

- [GitHub - haraldk/TwelveMonkeys: TwelveMonkeys ImageIO: Additional plug-ins and extensions for Java&#39;s ImageIO](https://github.com/haraldk/TwelveMonkeys)

# 제한사항 1

java6 과 함께 사용하기 위해서는 TwelveMonkeys 3.0.x 버전을 사용해야 하는데, TIFF 포맷을 완전히 지원하지 못하는 모습을 보였다. 

TwelveMonkys 의 3.5 이후 버전은 java7 이상에서 동작한다.

# 제한사항 2

TwelveMonkeys 는 ImageIO 의 플러그인으로 동작하는데, 웹앱에서 사용될 경우에는 플러그인 로딩 처리에 문제가 있는 것 같다.

이에 대해서는 서블릿 초기화시에 다음과 같은 코드를 추가하도록 가이드하고 있다.

```java
servletContext.addListener(IIOProviderContextListener.class);
```

또는

```xml
<web-app ...>

    ...

        <listener>
            <display-name>ImageIO service provider loader/unloader</display-name>
            <listener-class>com.twelvemonkeys.servlet.image.IIOProviderContextListener</listener-class>
        </listener>

    ...

    </web-app>
```

그리고 의존성을 추가해야 한다.

```xml
<!--
        Optional dependency. Needed only if you deploy `ImageIO` plugins as part of a web app.
        Make sure you add the `IIOProviderContextListener` to your `web.xml`, see above.
        -->
        <dependency>
            <groupId>com.twelvemonkeys.servlet</groupId>
            <artifactId>servlet</artifactId>
            <version>3.5</version>
        </dependency>
```

- [ImageIO.getImageWriter(reader) not working inside tomcat · Issue #16 · haraldk/TwelveMonkeys · GitHub](https://github.com/haraldk/TwelveMonkeys/issues/16#issuecomment-326128071)

- [GitHub - haraldk/TwelveMonkeys: TwelveMonkeys ImageIO: Additional plug-ins and extensions for Java&#39;s ImageIO](https://github.com/haraldk/TwelveMonkeys#deploying-the-plugins-in-a-web-app)
